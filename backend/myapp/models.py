from django.db import models
from django.urls import reverse


class Car(models.Model):
    PRICE_CHOICES = [
        ('N', '–ù–µ –ø—Ä–æ–¥–∞—ë—Ç—Å—è'),
        ('M', '–ü–æ –∫–æ—Ä–º–∞–Ω—É'),
        ('MM', '–ü—Ä–∏–¥—ë—Ç—Å—è –≤–∑—è—Ç—å –≤ –∫—Ä–µ–¥–∏—Ç'),
        ('MMM', '–ù–µ –≤–∞—Ä–∏–∞–Ω—Ç')
    ]

    title = models.CharField(max_length=255, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—á–∫–∏')
    price = models.CharField(
        max_length=3,
        choices=PRICE_CHOICES, default='N',
        verbose_name='–¶–µ–Ω–∞'
    )
    content = models.TextField(verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ+—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏')
    photo = models.ImageField(upload_to='photos/%Y/%m/%d',
                              verbose_name='—Ñ–æ—Ç–æ –∞–≤—Ç–æ',
                              # default='photos/test/font1.png',
                              )  # –í –ø–∞—Ä–∞–º–µ—Ç—Ä upload_to –º–æ–∂–Ω–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å —à–∞–±–ª–æ–Ω.–ù–∞–ø—Ä–∏–º–µ—Ä, %Y/%m/%d –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ –∫–∞–∫ –≥–æ–¥,–º–µ—Å—è—Ü,–¥–µ–Ω—å
    time_create = models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏')
    time_update = models.DateTimeField(auto_now=True, verbose_name='–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è')
    is_published = models.BooleanField(default=True)
    category = models.ForeignKey('Category', on_delete=models.PROTECT, null=True)

    # –º–∞–≥–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥
    def __str__(self):
        return self.title + 'üöó'

    def func(self):
        print('–≤—ã–∑–æ–≤ func')

    def get_absolute_url(self):
        return reverse('post', kwargs={
            'post_id': self.pk
        })

    def get(self):
        return self.title

    '''
    –ü–æ—á–µ–º—É —ç—Ç–æ –ª—É—á—à–µ —Ç–µ–≥–∞ url? –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, 
    —á—Ç–æ –≤ –±—É–¥—É—â–µ–º –º—ã –∏–∑–º–µ–Ω–∏–ª–∏ —à–∞–±–ª–æ–Ω —ç—Ç–æ–π —Å—Å—ã–ª–∫–∏ –∏ —Å—Ç–∞–ª–∏
     –≤—ã–≤–æ–¥–∏—Ç—å –ø–æ—Å—Ç—ã –Ω–µ –ø–æ id, –∞ –ø–æ —Å–ª–∞–≥—É. –¢–æ–≥–¥–∞, 
     –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–µ–≥–∞ url, –Ω–∞–º –ø—Ä–∏—à–ª–æ—Å—å –±—ã –º–µ–Ω—è—Ç—å —ç—Ç–∏ —Å—Å—ã–ª–∫–∏
      –≤ –∫–∞–∂–¥–æ–º —à–∞–±–ª–æ–Ω–µ, –∑–∞–º–µ–Ω—è—è self.pk –Ω–∞ self.slug, –Ω–∞–ø—Ä–∏–º–µ—Ä. 
      –í —ç—Ç–æ–º –∫–∞–∫ —Ä–∞–∑ –Ω–µ—É–¥–æ–±—Å—Ç–≤–æ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫. 
      –¢–µ–ø–µ—Ä—å, —Å –º–µ—Ç–æ–¥–æ–º get_absolute_url() 
      –Ω–∞–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ –Ω–µ–º –∏ —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞–∂–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–∞—Ö, –≥–¥–µ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
    '''


class Category(models.Model):
    name = models.CharField(max_length=100, db_index=True)

    def __str__(self):
        return self.name

    def get_absolute_url(self):
        return reverse('category', kwargs={
            'category_id': self.pk
        })

    '''
    –ø—Ä–æ db_index
    –≠—Ç–æ –Ω–µ —Å–æ–≤—Å–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è –¥–∂–∞–Ω–≥–æ; –±–æ–ª—å—à–µ —Å–≤—è–∑–∞–Ω–æ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. –í—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –≤ —Å—Ç–æ–ª–±—Ü—ã, –∫–æ–≥–¥–∞ —Ö–æ—Ç–∏—Ç–µ —É—Å–∫–æ—Ä–∏—Ç—å –ø–æ–∏—Å–∫ –≤ —ç—Ç–æ–º —Å—Ç–æ–ª–±—Ü–µ.    
    –û–±—ã—á–Ω–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ–∏—Å–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω.
    –ï—Å–ª–∏ –≤—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ –º–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∏—Å–∫–∞ –≤–æ –≤—Ç–æ—Ä–∏—á–Ω–æ–º —Å—Ç–æ–ª–±—Ü–µ, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –∫ —ç—Ç–æ–º—É —Å—Ç–æ–ª–±—Ü—É, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å.
    –ò–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ, –∫–∞–∫ –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º —Å –º–∞—Å—à—Ç–∞–±–æ–º, –æ–Ω–∏ –ø—Ä–∏–º–µ–Ω–∏–º—ã —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ (10 000 ‚Äî —ç—Ç–æ –Ω–µ–º–Ω–æ–≥–æ).
    –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ –≤—Å—Ç–∞–≤–∫—É, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏–Ω–¥–µ–∫—Å—ã. –ü–æ—ç—Ç–æ–º—É –±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã, –≤ –∫–∞–∫–æ–π —Å—Ç–æ–ª–±–µ—Ü –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∏–Ω–¥–µ–∫—Å—ã.
    –ö–∞–∫ –≤—Å–µ–≥–¥–∞, –≤—ã –º–æ–∂–µ—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –º–æ–∂–µ—Ç–µ –∏–∑–º–µ—Ä–∏—Ç—å, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ EXPLAIN–æ–ø–µ—Ä–∞—Ç–æ—Ä –∏ –∂—É—Ä–Ω–∞–ª—ã –≤–∞—à–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ –ª—é–±—ã–µ –∂—É—Ä–Ω–∞–ª—ã –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤), —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, –≥–¥–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã –∏–Ω–¥–µ–∫—Å—ã.
    '''

#
# class ExamplePerson(models.Model):
#     CHOICES = (
#         ('M', '–º—É–∂–∏–∫'),
#         ('F', '–¥–µ–≤—É—à–∫–∞')
#     )
#     name = models.CharField()
#     sex = models.CharField(max_length=1, choices=CHOICES)
#     age = models.IntegerField()
#
#     def get_absolute_url(self):
#         return reverse('myurl', kwargs={
#             'id': self.id,
#             'name': self.name
#         })
#
#     def get_absolute_url2(self):
#         return f'/person/{self.name}/'

